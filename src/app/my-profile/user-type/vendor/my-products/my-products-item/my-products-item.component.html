<template #content let-close="close">
  <div class="dark-modal">

    <div class="modal-body">
      <button type="button" class="close" aria-label="Close" (click)="close()">
        <span class="fa fa-times" aria-hidden="true"></span>
      </button>
      <h3 align="center" class="modal-title">{{newValue.title}}</h3>
      <hr>

      <img class="shape-circle"
           src="https://upload.wikimedia.org/wikipedia/commons/4/49/Fredmeyer_edit_1.jpg"
           alt="Card image cap"
           align="middle"
      >
      <hr>

      <form (ngSubmit)="onUpdatedProduct(f)" #f="ngForm" >
        <div class="form-group">
          <label for="title">Naziv proizvoda</label>
          <input type="text"
                 class="form-control"
                 name="title"
                 [(ngModel)]="newValue.title"
                 id="title"
                 required
          >
        </div>
        <div class="form-group">
          <label for="description">Opis proizvoda</label>
          <textarea class="form-control"
                    id="description"
                    rows="5"
                    name="description"
                    [(ngModel)]="newValue.description"
                    required
          ></textarea>
        </div>

        <hr>

        <div class="form-group row">
          <label for="price" class="col-3 col-form-label">Cijena proizvoda</label>
          <div class="col-4">
            <input class="form-control"
                   type="number"
                   id="price"
                   step="0.01"
                   min="0"
                   name="price"
                   [(ngModel)]="newValue.price"
                   required
            >
          </div>
          <div class="form-check row col-5">
            <label *ngIf="newValue.availability" class="form-check-label col-9 checked" for="availability"> Proizvod je dostupan </label>
            <label *ngIf="!newValue.availability" class="form-check-label col-9 unchecked" for="availability"> Proizvod nije dostupan </label>
            <input type="checkbox"
                   id="availability"
                   class="form-check-input col-1"
                   name="availability"
                   [(ngModel)]="newValue.availability"
            >
          </div>
        </div>

        <hr>

        <div class="form-group">
          <label for="categories">Odaberite kategorije vašeg proizvoda: </label>
          <select style="text-align: center" (click)="addCategory(selected.value)" #selected class="form-control" id="categories">
            <option *ngFor="let category of getCategories()"
                    ngbTooltip="category.description"
            >{{category.name}}</option>
          </select>
        </div>
        <div>
          <label>Kategorije vašeg proizvoda: </label>
          <div class="col-12 centered" *ngIf="newValue.categories.length===0">
            <h3 align="center" style="color: red">Molimo Vas unesite kategoriju</h3>
          </div>
          <div class="col-12 centered">
            <h4 class="inline"
                align="center"
                *ngFor="let categoryName of newValue.categories"
                ngbTooltip="Kliknite za brisanje kategorije"
                (click)="deleteThisCategory(categoryName)"
            >
              <span class="badge badge-info" (click)="deleteThisCategory(categoryName)">{{categoryName}}</span>
            </h4>
          </div>
        </div>

        <hr>
        <button type="submit" class="btn btn-outline-success update-delete" [disabled]="!f.valid">
          <span class="fa fa-floppy-o"></span> Izmjeni proizvod
        </button>
      </form>
      <button type="button" class="btn btn-outline-danger update-delete" (click)="close();onDeleteProduct()">
        <span class="fa fa-times"></span> Obriši proizvod
      </button>

    </div>
  </div>
</template>



<a style="cursor: pointer" (click)="open(content)">
  <div class="col-">
    <div class="card card-margin" style="width: 20rem;">
      <img class="card-img-top img-size" src="https://upload.wikimedia.org/wikipedia/commons/4/49/Fredmeyer_edit_1.jpg" alt="Card image cap">
      <div class="card-block">
        <h4 align="center" class="card-title"><b>Naziv proizvoda: </b></h4>
        <h4 align="center" class="card-title">{{product.title}}</h4>
        <p class="card-text"><b>Opis proizvoda: </b></p>
        <p align="center">{{product.description.substring(0, substringLength).concat(product.description.length > substringLength ? "...":"")}}</p>
        <div *ngIf="product.categories">
          <div class="col-12 centered">
            <h4 align="center" *ngFor="let categoryName of product.categories">
              <span class="badge badge-info">{{categoryName}}</span>
            </h4>
          </div>
        </div>
        <hr>
        <p class="card-text"><b>Cijena: </b> {{product.price | number:"1.2-2"}} HRK</p>
        <p *ngIf="product.availability"><small class="available">Proizvod je dostupan</small></p>
        <p *ngIf="!product.availability"><small class="not-available">Proizvod nije dostupan</small></p>
        <p class="card-text"><small><b>Kontakt oglašivača: </b> {{product.email_seller}}</small></p>
      </div>
    </div>
  </div>
</a>
